<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Socket.io Test</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <h1>Socket.io Test Client</h1>
    <div id="status">Disconnected</div>
    <div id="messages"></div>


    <script>
        // Remplacer par un vrai token
        const token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6Ijg3MDgyMTM2LTIwNzctNDkyMy04YjE0LWNiNzk4N2VmZGM4MCIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsIm5hbWUiOiJUZXN0IFVzZXIiLCJpYXQiOjE3NzExNTIxNDYsImV4cCI6MTc3MTc1Njk0Nn0.-wrRzUXG64-DPGS53GlhD94Xndw_xBWL2CPFao_Uk28";

        const socket = io('http://localhost:5000', {
            auth: { token }
        });

        const status = document.getElementById('status');
        const messages = document.getElementById('messages');

        socket.on('connect', () => {
            status.textContent = 'Connected: ' + socket.id;
            console.log('Connected!');

            // Rejoindre un projet (remplacer par un vrai ID)
            socket.emit('project:join', '8fa0f3e8-1fd7-48f6-bc84-ab3fd9a39856');
        });

        socket.on('disconnect', () => {
            status.textContent = 'Disconnected';
            console.log('Disconnected!');
        });

        // Ecouter les Ã©vÃ©nements
        socket.on('task:created', (data) => {
            console.log('Task created:', data);
            messages.innerHTML += `<p>Task created: ${data.task.title}</p>`;
        });

        socket.on('task:updated', (data) => {
            console.log('Task updated:', data);
            messages.innerHTML += `<p>Task updated: ${data.task.title}</p>`;
        });

        socket.on('task:moved', (data) => {
            console.log('Task moved:', data);
            messages.innerHTML += `<p>Task moved: ${data.taskId}</p>`;
        });

        socket.on('comment:created', (data) => {
            console.log('Comment created:', data);
            messages.innerHTML += `<p>Comment: ${data.comment.content}</p>`;
        });

        socket.on('user:online', (data) => {
            console.log('User online:', data);
            messages.innerHTML += `<p>ğŸŸ¢ ${data.userName} is online</p>`;
        });
        socket.on('user:offline', (data) => {
            console.log('User offline:', data);
            messages.innerHTML += `<p>ğŸ”´ User offline: ${data.userId}</p>`;
        });
    </script>
</body>
</html>